#define file_functions#include "file.h"#include "memory.h"/* READ dataset for memory information *//* works on test datafiles MAK 1999.05.23/* functioned by M. Kosnik 1999.05.23, original code by R. Lupia/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */long getfilelength(char *str1, int col){/*char hold[MAXCHAR];*/int a, b, length=0;FILE *file;FILE *fopen();file = fopen(str1,"r");			/* Open specified file containing data */while (!feof(file))				/* count number of carriage returns in input file */	{/*	fgets(hold, MAXCHAR-1, file);	*/	for (b=0; b<col; ++b)	{		fscanf(file, "%d", &a);		}	++length;	}fclose(file);return length;}	/* READ dataset for memory information *//* works on test datafiles MAK 1999.05.23/* functioned by M. Kosnik 1999.05.23, original code by R. Lupia/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */long getdfilelength(char *str1, int col){/*char hold[MAXCHAR];*/int b, length=0;double	f;FILE *file;FILE *fopen();file = fopen(str1,"r");			/* Open specified file containing data */while (!feof(file))				/* count number of carriage returns in input file */	{/*	fgets(hold, MAXCHAR-1, file);	*/	for (b=0; b<col; ++b)	fscanf(file, "%lf", &f);	++length;	}fclose(file);return length;}/* READ dataset from file/* works on test datafiles MAK 1999.05.23/* functioned by M. Kosnik 1999.05.23, original code by R. Lupia/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */unsigned long **ul_readdata(char *str1, int ROWS, int COLUMNS){int i,j;int column, occurrence; unsigned long **RawData;unsigned long dummy;FILE *Input;RawData = ulmatrix(ROWS, COLUMNS);for (i=0 ; i<ROWS ; i++)	for (j=0 ; j<COLUMNS ; j++) 		RawData[i][j]=0;Input = fopen(str1,"r");			/* Open specified file containing data */occurrence = 0;column = 0;while (!feof(Input))								/* read matrix into memory */	{	if (column == COLUMNS)		{		column = 0;		++occurrence;		}	fscanf(Input, "%d", &dummy);	RawData[occurrence][column] = dummy;	++column;	}++occurrence;										/* add 1 since not added after test */ fclose(Input);return RawData;}/* READ dataset from file/* works on test datafiles MAK 1999.05.23/* functioned by M. Kosnik 1999.05.23, original code by R. Lupia/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */double **d_readdata(char *str1, int ROWS, int COLUMNS){int i,j;int column, occurrence; double **RawData;double dummy;FILE *Input;RawData = dmatrix(ROWS, COLUMNS);for (i=0 ; i<ROWS ; i++)	for (j=0 ; j<COLUMNS ; j++) 		RawData[i][j]=0;Input = fopen(str1,"r");			/* Open specified file containing data */occurrence = 0;column = 0;while (!feof(Input))								/* read matrix into memory */	{	if (column == COLUMNS)		{		column = 0;		++occurrence;		}	fscanf(Input, "%d", &dummy);	RawData[occurrence][column] = dummy;	++column;	}++occurrence;										/* add 1 since not added after test */ fclose(Input);return RawData;}/* READ dataset from file/* works on test datafiles MAK 1999.05.23/* functioned by M. Kosnik 1999.05.23, original code by R. Lupia/* modified to floating point data by m. kosnik 1999.09.13/* where a is the number of columns in the data file/* where b is the number of rows in the data file/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */float **f_readdata(char *str1, int a, int b){	int i,j;	float **RawData;	float dummy;	FILE *Input;		RawData = fmatrix(b, a);		/* setup memory for read in mattrix */	for (i=0 ; i<a ; i++)		for (j=0 ; j<b ; j++) 			RawData[j][i]=0.f;		Input = fopen(str1,"r");			/* Open specified file containing data */		for (i=0 ; i<a ; i++)		for (j=0 ; j<b ; j++) {			fscanf(Input, "%f", &dummy);			RawData[j][i] = dummy;		}	fclose(Input);		return RawData;}void cleanupfiles(char *str){	const char list[] = ".list";			const char occr[] = ".occr";			const char spec[] = ".spec";  	const char loccr[] = ".list.occr";			const char lspec[] = ".list.spec"; 	const char a[] = ".raw";	const char b[] = ".raup";		const char c[] = ".sum";  			const char d[] = ".u95"; 		const char e[] = ".l95";	char temp[37], temp1[37];		strcpy(temp,str);	strcat(temp,list);	strcpy(temp1,temp);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,a);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,b);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,c);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,d);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,e);	if (fopen(temp, "w") != NULL) remove(temp);		strcpy(temp,str);	strcat(temp,occr);	strcpy(temp1,temp);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,a);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,b);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,c);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,d);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,e);	if (fopen(temp, "w") != NULL) remove(temp);		strcpy(temp,str);	strcat(temp,spec);	strcpy(temp1,temp);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,a);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,b);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,c);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,d);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,e);	if (fopen(temp, "w") != NULL) remove(temp);			strcpy(temp,str);	strcat(temp,loccr);	strcpy(temp1,temp);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,a);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,b);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,c);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,d);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,e);	if (fopen(temp, "w") != NULL) remove(temp);		strcpy(temp,str);	strcat(temp,lspec);	strcpy(temp1,temp);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,a);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,b);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,c);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,d);	if (fopen(temp, "w") != NULL) remove(temp);	strcpy(temp,temp1); strcat(temp,e);	if (fopen(temp, "w") != NULL) remove(temp);		return;}